{% extends "main.html" %}
{% block content %}
{% include "loggedInHeader.html" %}

<div class="row divider blue">
	<div class="col-md-12"></div>
</div>

<div class="row banner main">
	<div class="col-md-1"></div>
	<div class="col-md-11 padding-none text-left">
		<h1>Lizards</h1>
	</div>
</div>

	{% with messages = get_flashed_messages() %}
    {% if messages %}
		<div class="row divider flash">
			<div class="col-md-12">
				<strong> {{ message }} </strong> </li>
			</div>
		</div>
    {% endif %}
  {% endwith %}


<div class="row padding-top padding-bottom">
	<div class="col-md-1"></div>
	<div class="col-md-10 padding-none">
		<a href="{{url_for('newCategory')}}">
			<button class="btn btn-default" id="new-restaurant">
				<span class="glyphicon glyphicon-globe" aria-hidden="true"></span>Add Category
			</button>
		</a>
	</div>
	<div class="col-md-1"></div>
</div>

{% if changes!=[] %}
<div class="row">
	<div class="col-md-6 recent-activity">
<h3>Recent Activity</h3>
<ul>
{% for either in changes %}
	{% if either.table == 'category' %}
		{% if either.action == 'new' %}
			<li>Category <a href="{{ url_for('showCategory', _anchor=either.category_id) }}"><i>{{either.category_name}}</i></a> added <span class="time"> {{pretty_date(either.update_instant)}}</span></li>
		{% endif %}
		{% if either.action == 'update' %}
			<li>Category <a href="{{ url_for('showCategory', _anchor=either.category_id) }}"><i>{{either.category_name}}</i></a> updated <span class="time"> {{pretty_date(either.update_instant)}}</span></li>
		{% endif %}
		{% if either.action == 'delete' %}
			<li>Category <i>{{either.category_name}}</i></a> deleted <span class="time"> {{pretty_date(either.update_instant)}}</span></li>
		{% endif %}
	{% endif %}
	{% if either.table == 'item' %}
		{% if either.action == 'new' %}
			<li>Item <a href="{{ url_for('showItem', category_id=either.category_id, _anchor=either.item_id) }}"><i>{{either.item_name}}</i></a> added to Category <a href="{{ url_for('showCategory', _anchor=either.category_id) }}"><i>{{either.category_name}}</i></a > <span class="time"> {{pretty_date(either.update_instant)}}</span></li>
		{% endif %}
		{% if either.action == 'update' %}
			<li>Item <a href="{{ url_for('showItem', category_id=either.category_id, _anchor=either.item_id) }}"><i>{{either.item_name}}</i></a> updated in Category <a href="{{ url_for('showCategory', _anchor=either.category_id) }}"><i>{{either.category_name}}</i></a > <span class="time"> {{pretty_date(either.update_instant)}}</span></li>
		{% endif %}
		{% if either.action == 'delete' %}
			<li>Item <i>{{either.item_name}}</i></a> deleted from Category <a href="{{ url_for('showCategory', _anchor=either.category_id) }}"><i>{{either.category_name}}</i></a > <span class="time"> {{pretty_date(either.update_instant)}}</span></li>
		{% endif %}
	{% endif %}
{% endfor %}
</div>
</div>
{% endif %}

<div class="row padding-top padding-bottom"></div>

{% for (number, category) in enumerate(categories) %}
	{% if number%2 == 0 %}
		<div class="row">
			<div class="col-md-6">
				<div class="row">
					<div class="col-md-1"></div>
					<a href = "{{ url_for('showItem', category_id = category.id) }}" id={{category.id}}>
						<div class="col-md-10 restaurant-list">
							<img class="image" src="{{category.picture.locate()}}">
							<h3 class="category-text text-left text-justify">{{category.name}}</h3>
						</div>
					</a>
					<div class="col-md-1"></div>
				</div>
			</div>
			{% if number == total_categories %}
				</div>
				<div class="row padding-top padding-bottom"></div>
			{% endif %}
	{% endif %}
	{% if number%2 == 1 %}
	<div class="col-md-6">
		<div class="row">
			<div class="col-md-1"></div>
				<a href = "{{ url_for('showItem', category_id = category.id) }}" id={{category.id}}>
					<div class="col-md-10 restaurant-list">
						<img class="image" src="{{category.picture.locate()}}">
						<h3 class="category-text text-left text-justify">{{category.name}}</h3>
					</div>
				</a>
				<div class="col-md-1"></div>
			</div>
		</div>
	</div>
	<div class="row padding-top padding-bottom"></div>
	{% endif %}
{% endfor %}
{% if categories == [] %}
	<div class="col-md-1"></div>
		<div class="col-md-10">
			<h3>No Categories Added Yet</h3>
		</div>
		<div class="col-md-1"></div>
	</div>
{% endif %}
{% endblock %}
