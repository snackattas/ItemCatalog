
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: class HttpExposedFileSystemStore</title>
<meta charset="utf-8">
</head><body bgcolor="#f0f0f8">
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><strong>sqlalchemy_imageattach.stores.fs.HttpExposedFileSystemStore</strong> = <a name="sqlalchemy_imageattach.stores.fs.HttpExposedFileSystemStore">class HttpExposedFileSystemStore</a>(<a href="sqlalchemy_imageattach.stores.fs.html#BaseFileSystemStore">BaseFileSystemStore</a>)</font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt>Filesystem-backed&nbsp;storage&nbsp;implementation&nbsp;with&nbsp;WSGI&nbsp;middleware<br>
which&nbsp;serves&nbsp;actual&nbsp;image&nbsp;files.<br>
::<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;flask&nbsp;import&nbsp;Flask<br>
&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;sqlalchemy_imageattach.stores.fs&nbsp;import&nbsp;HttpExposedFileSystemStore<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;app&nbsp;=&nbsp;Flask(__name__)<br>
&nbsp;&nbsp;&nbsp;&nbsp;fs_store&nbsp;=&nbsp;HttpExposedFileSystemStore('userimages',&nbsp;'images/')<br>
&nbsp;&nbsp;&nbsp;&nbsp;app.wsgi_app&nbsp;=&nbsp;fs_store.<a href="#sqlalchemy_imageattach.stores.fs.HttpExposedFileSystemStore-wsgi_middleware">wsgi_middleware</a>(app.wsgi_app)<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%"><dl><dt>Method resolution order:</dt>
<dd><a href="sqlalchemy_imageattach.stores.fs.html#HttpExposedFileSystemStore">HttpExposedFileSystemStore</a></dd>
<dd><a href="sqlalchemy_imageattach.stores.fs.html#BaseFileSystemStore">BaseFileSystemStore</a></dd>
<dd><a href="sqlalchemy_imageattach.store.html#Store">sqlalchemy_imageattach.store.Store</a></dd>
<dd><a href="__builtin__.html#object">__builtin__.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="HttpExposedFileSystemStore-__init__"><strong>__init__</strong></a>(self, path, prefix<font color="#909090">='__images__'</font>)</dt></dl>

<dl><dt><a name="HttpExposedFileSystemStore-wsgi_middleware"><strong>wsgi_middleware</strong></a>(self, app)</dt><dd><tt>WSGI&nbsp;middlewares&nbsp;that&nbsp;wraps&nbsp;the&nbsp;given&nbsp;``app``&nbsp;and&nbsp;serves<br>
actual&nbsp;image&nbsp;files.&nbsp;::<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;fs_store&nbsp;=&nbsp;HttpExposedFileSystemStore('userimages',&nbsp;'images/')<br>
&nbsp;&nbsp;&nbsp;&nbsp;app&nbsp;=&nbsp;fs_store.<a href="#sqlalchemy_imageattach.stores.fs.HttpExposedFileSystemStore-wsgi_middleware">wsgi_middleware</a>(app)<br>
&nbsp;<br>
:param&nbsp;app:&nbsp;the&nbsp;wsgi&nbsp;app&nbsp;to&nbsp;wrap<br>
:type&nbsp;app:&nbsp;:class:`collections.Callable`<br>
:returns:&nbsp;the&nbsp;another&nbsp;wsgi&nbsp;app&nbsp;that&nbsp;wraps&nbsp;``app``<br>
:rtype:&nbsp;:class:`StaticServerMiddleware`</tt></dd></dl>

<hr>
Data descriptors defined here:<br>
<dl><dt><strong>base_url</strong></dt>
</dl>
<hr>
Methods inherited from <a href="sqlalchemy_imageattach.stores.fs.html#BaseFileSystemStore">BaseFileSystemStore</a>:<br>
<dl><dt><a name="HttpExposedFileSystemStore-delete_file"><strong>delete_file</strong></a>(self, *args, **kwargs)</dt></dl>

<dl><dt><a name="HttpExposedFileSystemStore-get_file"><strong>get_file</strong></a>(self, *args, **kwargs)</dt></dl>

<dl><dt><a name="HttpExposedFileSystemStore-get_path"><strong>get_path</strong></a>(self, object_type, object_id, width, height, mimetype)</dt></dl>

<dl><dt><a name="HttpExposedFileSystemStore-get_url"><strong>get_url</strong></a>(self, *args, **kwargs)</dt></dl>

<dl><dt><a name="HttpExposedFileSystemStore-put_file"><strong>put_file</strong></a>(self, file, object_type, object_id, width, height, mimetype, reproducible)</dt></dl>

<hr>
Methods inherited from <a href="sqlalchemy_imageattach.store.html#Store">sqlalchemy_imageattach.store.Store</a>:<br>
<dl><dt><a name="HttpExposedFileSystemStore-delete"><strong>delete</strong></a>(self, image)</dt><dd><tt>Delete&nbsp;the&nbsp;file&nbsp;of&nbsp;the&nbsp;given&nbsp;``image``.<br>
&nbsp;<br>
:param&nbsp;image:&nbsp;the&nbsp;image&nbsp;to&nbsp;delete<br>
:type&nbsp;image:&nbsp;:class:`sqlalchemy_imageattach.entity.Image`</tt></dd></dl>

<dl><dt><a name="HttpExposedFileSystemStore-locate"><strong>locate</strong></a>(self, image)</dt><dd><tt>Gets&nbsp;the&nbsp;URL&nbsp;of&nbsp;the&nbsp;given&nbsp;``image``.<br>
&nbsp;<br>
:param&nbsp;image:&nbsp;the&nbsp;image&nbsp;to&nbsp;get&nbsp;its&nbsp;url<br>
:type&nbsp;image:&nbsp;:class:`sqlalchemy_imageattach.entity.Image`<br>
:returns:&nbsp;the&nbsp;url&nbsp;of&nbsp;the&nbsp;image<br>
:rtype:&nbsp;:class:`basestring`</tt></dd></dl>

<dl><dt><a name="HttpExposedFileSystemStore-open"><strong>open</strong></a>(self, image, use_seek<font color="#909090">=False</font>)</dt><dd><tt>Opens&nbsp;the&nbsp;file-like&nbsp;object&nbsp;of&nbsp;the&nbsp;given&nbsp;``image``.<br>
Returned&nbsp;file-like&nbsp;object&nbsp;guarantees:<br>
&nbsp;<br>
-&nbsp;context&nbsp;manager&nbsp;protocol<br>
-&nbsp;:class:`collections.Iterable`&nbsp;protocol<br>
-&nbsp;:class:`collections.Iterator`&nbsp;protocol<br>
-&nbsp;:meth:`~file.read()`&nbsp;method<br>
-&nbsp;:meth:`~file.readline()`&nbsp;method<br>
-&nbsp;:meth:`~file.readlines()`&nbsp;method<br>
&nbsp;<br>
To&nbsp;sum&nbsp;up:&nbsp;you&nbsp;definitely&nbsp;can&nbsp;read&nbsp;the&nbsp;file,&nbsp;in&nbsp;:keyword:`with`<br>
statement&nbsp;and&nbsp;:keyword:`for`&nbsp;loop.<br>
&nbsp;<br>
Plus,&nbsp;if&nbsp;``use_seek``&nbsp;option&nbsp;is&nbsp;``True``:<br>
&nbsp;<br>
-&nbsp;:meth:`~file.seek()`&nbsp;method<br>
-&nbsp;:meth:`~file.tell()`&nbsp;method<br>
&nbsp;<br>
For&nbsp;example,&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;make&nbsp;a&nbsp;local&nbsp;copy&nbsp;of<br>
the&nbsp;image::<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;import&nbsp;shutil<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;store.<a href="#sqlalchemy_imageattach.stores.fs.HttpExposedFileSystemStore-open">open</a>(image)&nbsp;as&nbsp;src:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;<a href="#sqlalchemy_imageattach.stores.fs.HttpExposedFileSystemStore-open">open</a>(filename,&nbsp;'wb')&nbsp;as&nbsp;dst:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shutil.copyfileobj(src,&nbsp;dst)<br>
&nbsp;<br>
:param&nbsp;image:&nbsp;the&nbsp;image&nbsp;to&nbsp;get&nbsp;its&nbsp;file<br>
:type&nbsp;image:&nbsp;:class:`sqlalchemy_imageattach.entity.Image`<br>
:param&nbsp;use_seek:&nbsp;whether&nbsp;the&nbsp;file&nbsp;should&nbsp;seekable.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;``True``&nbsp;it&nbsp;maybe&nbsp;buffered&nbsp;in&nbsp;the&nbsp;memory.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default&nbsp;is&nbsp;``False``<br>
:type&nbsp;use_seek:&nbsp;:class:`bool`<br>
:returns:&nbsp;the&nbsp;file-like&nbsp;object&nbsp;of&nbsp;the&nbsp;image,&nbsp;which&nbsp;is&nbsp;a&nbsp;context<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;manager&nbsp;(plus,&nbsp;also&nbsp;seekable&nbsp;only&nbsp;if&nbsp;``use_seek``<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;``True``)<br>
:rtype:&nbsp;:class:`file`,&nbsp;:class:`~sqlalchemy_imageattach.file.FileProxy`,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file-like&nbsp;object<br>
:raises&nbsp;exceptions.IOError:&nbsp;when&nbsp;such&nbsp;file&nbsp;doesn't&nbsp;exist</tt></dd></dl>

<dl><dt><a name="HttpExposedFileSystemStore-store"><strong>store</strong></a>(self, image, file)</dt><dd><tt>Stores&nbsp;the&nbsp;actual&nbsp;data&nbsp;``file``&nbsp;of&nbsp;the&nbsp;given&nbsp;``image``.<br>
::<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;<a href="#sqlalchemy_imageattach.stores.fs.HttpExposedFileSystemStore-open">open</a>(imagefile,&nbsp;'rb')&nbsp;as&nbsp;f:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;store.<a href="#sqlalchemy_imageattach.stores.fs.HttpExposedFileSystemStore-store">store</a>(image,&nbsp;f)<br>
&nbsp;<br>
:param&nbsp;image:&nbsp;the&nbsp;image&nbsp;to&nbsp;store&nbsp;its&nbsp;actual&nbsp;data&nbsp;file<br>
:type&nbsp;image:&nbsp;:class:`sqlalchemy_imageattach.entity.Image`<br>
:param&nbsp;file:&nbsp;the&nbsp;image&nbsp;file&nbsp;to&nbsp;put<br>
:type&nbsp;file:&nbsp;file-like&nbsp;object,&nbsp;:class:`file`</tt></dd></dl>

<hr>
Data descriptors inherited from <a href="sqlalchemy_imageattach.store.html#Store">sqlalchemy_imageattach.store.Store</a>:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><tt>dictionary&nbsp;for&nbsp;instance&nbsp;variables&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><tt>list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
</td></tr></table>
</body></html>